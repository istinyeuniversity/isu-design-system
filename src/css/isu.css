

@import '../styles/tokens.css';

/* Google Fonts - Space Grotesk and Poppins */
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap');

/* Tailwind layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   DARK THEME IMPROVEMENTS
   ============================================ */

@layer base {
  :root {
    /* Fonts */
    --font-heading: 'Space Grotesk', sans-serif;
    --font-body: 'Poppins', sans-serif;

    /* Light Theme Colors */
    --isu-primary: #007fff;
    --isu-primary-dark: #0066cc;
    --isu-primary-light: #3399ff;
    --isu-neutral: #ededed;
    --isu-neutral-dark: #1a1a1a;

    /* Light Theme - Background Layers */
    --bg-primary: #ffffff;
    --bg-secondary: #f9fafb;
    --bg-tertiary: #f3f4f6;
    --bg-hover: #f5f5f5;

    /* Light Theme - Text Hierarchy */
    --text-primary: #111827;
    --text-secondary: #374151;
    --text-tertiary: #6b7280;
    --text-muted: #9ca3af;
    --text-disabled: #d1d5db;

    /* Light Theme - Component Colors */
    --border-primary: #e5e7eb;
    --border-secondary: #d1d5db;
    --border-focus: var(--isu-primary);
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);

    /* Semantic Colors */
    --success: #10b981;
    --success-bg: #ecfdf5;
    --success-border: #a7f3d0;
    --error: #ef4444;
    --error-bg: #fef2f2;
    --error-border: #fecaca;
    --warning: #f59e0b;
    --warning-bg: #fffbeb;
    --warning-border: #fde68a;
    --info: #3b82f6;
    --info-bg: #eff6ff;
    --info-border: #bfdbfe;
  }

  [data-theme="dark"] {
    /* Dark Theme - Primary Colors (daha soft blue) */
    --isu-primary: #60a5fa;
    --isu-primary-dark: #3b82f6;
    --isu-primary-light: #93c5fd;
    --isu-neutral: #404040;
    --isu-neutral-dark: #1a1a1a;

    /* Dark Theme - Background Layers (daha derin contrast) */
    --bg-primary: #0a0a0a;      /* Daha koyu base */
    --bg-secondary: #171717;    /* Elevated surface */
    --bg-tertiary: #262626;     /* Card background */
    --bg-hover: #333333;        /* Hover state */

    /* Dark Theme - Text Hierarchy (WCAG AA+ uyumlu) */
    --text-primary: #fafafa;    /* Daha soft beyaz */
    --text-secondary: #d4d4d4;  /* Secondary text */
    --text-tertiary: #a3a3a3;   /* Tertiary text */
    --text-muted: #737373;      /* Muted text */
    --text-disabled: #525252;   /* Disabled state */

    /* Dark Theme - Component Colors */
    --border-primary: #333333;
    --border-secondary: #404040;
    --border-focus: var(--isu-primary);
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5);

    /* Dark Theme - Semantic Colors */
    --success: #34d399;
    --success-bg: rgba(16, 185, 129, 0.1);
    --success-border: rgba(16, 185, 129, 0.3);
    --error: #f87171;
    --error-bg: rgba(239, 68, 68, 0.1);
    --error-border: rgba(239, 68, 68, 0.3);
    --warning: #fbbf24;
    --warning-bg: rgba(245, 158, 11, 0.1);
    --warning-border: rgba(245, 158, 11, 0.3);
    --info: #60a5fa;
    --info-bg: rgba(59, 130, 246, 0.1);
    --info-border: rgba(59, 130, 246, 0.3);
  }

  body {
    font-family: var(--font-body);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
  }
}

/* ============================================
   COMPONENTS LAYER
   ============================================ */
@layer components {
  
  /* ------ Button Components ------ */
  .isu-button {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg
           font-medium text-sm transition-all duration-200
           focus:outline-none focus:ring-2 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed;
    font-family: var(--font-body);
  }

  /* Button Sizes */
  .isu-button-sm { @apply px-3 py-1.5 text-xs; }
  .isu-button-md { @apply px-4 py-2 text-sm; }
  .isu-button-lg { @apply px-6 py-3 text-base; }
  .isu-button-xl { @apply px-8 py-4 text-lg; }

  /* Button Variants */
  .isu-button-primary {
    @apply isu-button text-white focus:ring-primary/20;
    background-color: var(--isu-primary);
    box-shadow: var(--shadow-sm);
  }

  .isu-button-primary:hover {
    background-color: var(--isu-primary-dark);
    box-shadow: var(--shadow-md);
  }

  .isu-button-secondary {
    @apply isu-button border focus:ring-neutral/20;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-primary);
    box-shadow: var(--shadow-sm);
  }

  .isu-button-secondary:hover {
    background-color: var(--hover-bg);
    box-shadow: var(--shadow-md);
  }

  .isu-button-ghost {
    @apply isu-button bg-transparent focus:ring-primary/20;
    color: var(--isu-primary);
  }

  .isu-button-ghost:hover {
    background-color: rgba(var(--isu-primary-rgb), 0.05);
  }

  .isu-button-outline {
    @apply isu-button bg-transparent border-2 focus:ring-primary/20;
    color: var(--isu-primary);
    border-color: var(--isu-primary);
  }

  .isu-button-outline:hover {
    background-color: var(--isu-primary);
    color: white;
  }

  .isu-button-success {
    @apply isu-button text-white focus:ring-green-500/20;
    background-color: var(--success);
  }

  .isu-button-success:hover {
    background-color: #059669;
  }

  .isu-button-warning {
    @apply isu-button text-white focus:ring-yellow-500/20;
    background-color: var(--warning);
  }

  .isu-button-warning:hover {
    background-color: #d97706;
  }

  .isu-button-error {
    @apply isu-button text-white focus:ring-red-500/20;
    background-color: var(--error);
  }

  .isu-button-error:hover {
    background-color: #dc2626;
  }

  /* ------ Form Components ------ */
  .isu-input {
    @apply w-full px-4 py-3 border-2 rounded-lg
           focus:outline-none focus:ring-2 transition-all duration-200;
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border-primary);
    --tw-ring-color: rgb(0 127 255 / 0.2);
  }

  .isu-input::placeholder {
    color: var(--text-muted);
  }

  .isu-input:focus {
    border-color: var(--isu-primary);
  }

  .isu-input:disabled {
    background-color: var(--bg-secondary);
    color: var(--text-tertiary);
    cursor: not-allowed;
    opacity: 0.6;
  }

  .isu-input.error {
    border-color: var(--error);
    --tw-ring-color: rgba(var(--error-rgb), 0.2);
  }

  .isu-textarea {
    @apply isu-input min-h-32;
    resize: vertical;
  }

  .isu-select {
    @apply isu-input cursor-pointer appearance-none bg-no-repeat;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-size: 1rem;
    padding-right: 2.5rem;
    color: var(--text-primary);
  }

  .isu-checkbox {
    @apply w-5 h-5 text-primary border-neutral/30 rounded
           focus:ring-primary/20 focus:ring-2 focus:ring-offset-0
           checked:bg-primary checked:border-primary
           transition-all duration-200 cursor-pointer;
  }

  .isu-radio {
    @apply w-5 h-5 text-primary border-neutral/30 rounded-full
           focus:ring-primary/20 focus:ring-2 focus:ring-offset-0
           checked:bg-primary checked:border-primary
           transition-all duration-200 cursor-pointer;
  }

  .isu-form-group { @apply mb-6; }
  
  .isu-form-label {
    @apply block text-sm font-medium text-gray-700 mb-2;
    font-family: var(--font-body);
  }

  .isu-form-help {
    @apply text-sm text-gray-500 mt-1;
    font-family: var(--font-body);
  }

  .isu-form-error {
    @apply text-sm text-red-600 mt-1;
    font-family: var(--font-body);
  }

  /* ------ Layout Components ------ */
  .isu-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .isu-grid { @apply grid gap-4; }
  .isu-grid-2 { @apply grid grid-cols-1 md:grid-cols-2 gap-4; }
  .isu-grid-3 { @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4; }
  .isu-grid-4 { @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4; }

  .isu-flex { @apply flex items-center; }
  .isu-flex-between { @apply flex items-center justify-between; }
  .isu-flex-center { @apply flex items-center justify-center; }
  .isu-flex-column { @apply flex flex-col; }

  .isu-card {
    @apply rounded-lg border-2 p-6 shadow-sm;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-primary);
  }

  .isu-card-hover {
    @apply isu-card transition-shadow cursor-pointer;
  }

  .isu-card-hover:hover {
    background-color: var(--bg-tertiary);
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  }

  .isu-section { @apply py-12 lg:py-16; }
  .isu-section-sm { @apply py-8 lg:py-12; }
  .isu-section-lg { @apply py-16 lg:py-24; }

  .isu-logo { @apply h-12 w-auto; }

  /* ------ Typography Components ------ */
  .isu-heading-1 {
    @apply text-5xl lg:text-6xl font-bold mb-6 leading-tight;
    font-family: var(--font-heading);
    color: var(--text-primary);
  }

  .isu-heading-2 {
    @apply text-4xl lg:text-5xl font-bold mb-5 leading-tight;
    font-family: var(--font-heading);
    color: var(--text-primary);
  }

  .isu-heading-3 {
    @apply text-3xl lg:text-4xl font-semibold mb-4 leading-snug;
    font-family: var(--font-heading);
    color: var(--text-primary);
  }

  .isu-heading-4 {
    @apply text-2xl lg:text-3xl font-semibold mb-3 leading-snug;
    font-family: var(--font-heading);
    color: var(--text-primary);
  }

  .isu-heading-5 {
    @apply text-xl lg:text-2xl font-medium mb-2 leading-normal;
    font-family: var(--font-heading);
    color: var(--text-secondary);
  }

  .isu-heading-6 {
    @apply text-lg lg:text-xl font-medium mb-2 leading-normal;
    font-family: var(--font-heading);
    color: var(--text-secondary);
  }

  .isu-body {
    @apply text-base leading-relaxed;
    font-family: var(--font-body);
    color: var(--text-secondary);
  }

  .isu-body-sm {
    @apply text-sm leading-relaxed;
    font-family: var(--font-body);
    color: var(--text-tertiary);
  }

  .isu-body-lg {
    @apply text-lg leading-relaxed;
    font-family: var(--font-body);
    color: var(--text-secondary);
  }

  .isu-lead {
    @apply text-xl leading-relaxed font-light;
    font-family: var(--font-body);
    color: var(--text-primary);
  }

  .isu-caption {
    @apply text-sm;
    font-family: var(--font-body);
    color: var(--text-tertiary);
  }

  .isu-caption-sm {
    @apply text-xs;
    font-family: var(--font-body);
    color: var(--text-muted);
  }

  .isu-link {
    @apply hover:text-primary-dark transition-colors underline;
    font-family: var(--font-body);
    color: var(--isu-primary);
  }

  .isu-link-subtle {
    @apply hover:text-gray-900 transition-colors;
    font-family: var(--font-body);
    color: var(--text-secondary);
  }

  .isu-quote {
    @apply border-l-4 pl-6 italic;
    font-family: var(--font-body);
    border-color: var(--isu-primary);
    color: var(--text-secondary);
  }

  .isu-quote-author {
    @apply text-sm mt-2 not-italic;
    font-family: var(--font-body);
    color: var(--text-tertiary);
  }

  /* ------ Navigation Components ------ */
  .isu-breadcrumb {
    @apply flex items-center space-x-2 text-sm text-gray-500 mb-4;
    font-family: var(--font-body);
  }

  .isu-breadcrumb-link {
    @apply hover:text-primary transition-colors;
    font-family: var(--font-body);
  }

  .isu-breadcrumb-separator {
    @apply mx-2 text-gray-400;
    font-family: var(--font-body);
  }

  .isu-pagination {
    @apply flex items-center justify-center space-x-1 mt-8;
  }

  .isu-pagination-link {
    @apply px-3 py-2 text-sm font-medium rounded-md transition-colors
           text-gray-600 hover:text-primary hover:bg-primary/5;
    font-family: var(--font-body);
  }

  .isu-pagination-link.active {
    @apply text-primary bg-primary/10;
  }

  .isu-pagination-prev,
  .isu-pagination-next {
    @apply px-2 py-2 text-gray-400 hover:text-primary transition-colors;
    font-family: var(--font-body);
  }

  /* ------ Feedback Components ------ */
  .isu-alert {
    @apply p-4 rounded-lg mb-4 border;
    font-family: var(--font-body);
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border-primary);
  }

      .isu-alert-success {
        background-color: var(--success-bg);
        color: var(--success);
        border-color: var(--success-border);
      }

      .isu-alert-error {
        background-color: var(--error-bg);
        color: var(--error);
        border-color: var(--error-border);
      }

      .isu-alert-warning {
        background-color: var(--warning-bg);
        color: var(--warning);
        border-color: var(--warning-border);
      }

      .isu-alert-info {
        background-color: var(--info-bg);
        color: var(--info);
        border-color: var(--info-border);
      }

  .isu-alert-icon { @apply flex items-start space-x-3; }
  .isu-alert-content { @apply flex-1; }
  
  .isu-alert-title {
    @apply font-medium mb-1;
    font-family: var(--font-heading);
  }

  .isu-alert-description {
    @apply text-sm opacity-90;
    font-family: var(--font-body);
  }

  .isu-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
    font-family: var(--font-body);
  }

  .isu-badge-primary {
    background-color: rgba(96, 165, 250, 0.1);
    color: var(--isu-primary);
  }

  .isu-badge-secondary {
    background-color: var(--bg-tertiary);
    color: var(--text-secondary);
  }

      .isu-badge-success {
        background-color: var(--success-bg);
        color: var(--success);
      }

      .isu-badge-warning {
        background-color: var(--warning-bg);
        color: var(--warning);
      }

      .isu-badge-error {
        background-color: var(--error-bg);
        color: var(--error);
      }

  .isu-spinner {
    @apply animate-spin rounded-full border-2;
    border-color: var(--border-primary);
    border-top-color: var(--isu-primary);
  }

  .isu-spinner-sm { @apply isu-spinner w-4 h-4; }
  .isu-spinner-md { @apply isu-spinner w-6 h-6; }
  .isu-spinner-lg { @apply isu-spinner w-8 h-8; }

  .isu-progress {
    @apply w-full rounded-full h-2;
    background-color: var(--border-primary);
  }

  .isu-progress-bar {
    @apply h-2 rounded-full transition-all duration-300;
    background-color: var(--isu-primary);
  }

  .isu-toast-item {
    @apply p-4 rounded-lg shadow-lg border mb-3 transform transition-all duration-300;
    font-family: var(--font-body);
  }

  .isu-toast-success {
    @apply isu-toast-item;
    background-color: var(--success-bg);
    color: var(--success);
    border-color: var(--success-border);
  }

  .isu-toast-error {
    @apply isu-toast-item;
    background-color: var(--error-bg);
    color: var(--error);
    border-color: var(--error-border);
  }

  .isu-toast-warning {
    @apply isu-toast-item;
    background-color: var(--warning-bg);
    color: var(--warning);
    border-color: var(--warning-border);
  }

  /* ------ Timeline Component ------ */
  .isu-timeline {
    @apply relative pl-8;
    position: relative;
  }

  .isu-timeline::before {
    content: '';
    position: absolute;
    left: 0.5rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: var(--border-primary);
  }

  .isu-timeline-item {
    @apply relative mb-8 last:mb-0;
    position: relative;
  }

  .isu-timeline-marker {
    @apply absolute w-4 h-4 rounded-full border-2;
    left: -1.75rem;
    top: 0.25rem;
    background-color: var(--bg-primary);
    border-color: var(--border-secondary);
    transition: all 0.3s ease;
  }

  .isu-timeline-item.completed .isu-timeline-marker {
    background-color: var(--success);
    border-color: var(--success);
    box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
  }

  .isu-timeline-item.active .isu-timeline-marker {
    background-color: var(--isu-primary);
    border-color: var(--isu-primary);
    box-shadow: 0 0 0 4px rgba(0, 127, 255, 0.2), 0 0 12px rgba(0, 127, 255, 0.4);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  .isu-timeline-item.pending .isu-timeline-marker {
    background-color: var(--bg-primary);
    border-color: var(--border-secondary);
  }

  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 0 4px rgba(0, 127, 255, 0.2), 0 0 12px rgba(0, 127, 255, 0.4);
    }
    50% {
      box-shadow: 0 0 0 6px rgba(0, 127, 255, 0.15), 0 0 16px rgba(0, 127, 255, 0.5);
    }
  }

  .isu-timeline-content {
    @apply pb-4;
  }

  .isu-timeline-title {
    @apply font-semibold text-base mb-1;
    font-family: var(--font-heading);
    color: var(--text-primary);
  }

  .isu-timeline-date {
    @apply text-sm mb-2;
    font-family: var(--font-body);
    color: var(--text-tertiary);
  }

  .isu-timeline-person {
    @apply text-sm mb-2;
    font-family: var(--font-body);
    color: var(--text-secondary);
  }

  .isu-timeline-note {
    @apply text-sm mt-2;
    font-family: var(--font-body);
    color: var(--text-tertiary);
  }

  /* ------ Step Indicator Component ------ */
  .isu-step-indicator {
    @apply flex items-center justify-between w-full relative;
    position: relative;
  }

  .isu-step {
    @apply flex flex-col items-center relative flex-1;
    position: relative;
  }

  .isu-step:not(:last-child)::after {
    content: '';
    position: absolute;
    top: 1rem;
    left: 50%;
    width: 100%;
    height: 2px;
    background-color: var(--border-primary);
    z-index: 0;
  }

  .isu-step.completed:not(:last-child)::after {
    background-color: var(--success);
  }

  .isu-step.active:not(:last-child)::after {
    background: linear-gradient(to right, var(--success) 0%, var(--border-primary) 100%);
  }

  .isu-step-circle {
    @apply w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold relative z-10;
    background-color: var(--bg-secondary);
    border: 2px solid var(--border-secondary);
    color: var(--text-tertiary);
    font-family: var(--font-body);
    transition: all 0.3s ease;
  }

  .isu-step.completed .isu-step-circle {
    background-color: var(--success);
    border-color: var(--success);
    color: white;
  }

  .isu-step.active .isu-step-circle {
    background-color: var(--isu-primary);
    border-color: var(--isu-primary);
    color: white;
    box-shadow: 0 0 0 4px rgba(0, 127, 255, 0.2), 0 0 12px rgba(0, 127, 255, 0.4);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  .isu-step.pending .isu-step-circle {
    background-color: var(--bg-secondary);
    border-color: var(--border-secondary);
    color: var(--text-tertiary);
  }

  .isu-step-label {
    @apply mt-2 text-xs text-center;
    font-family: var(--font-body);
    color: var(--text-secondary);
    max-width: 100px;
  }

  .isu-step.completed .isu-step-label,
  .isu-step.active .isu-step-label {
    color: var(--text-primary);
    font-weight: 500;
  }

  @media (max-width: 640px) {
    .step-indicator,
    .isu-step-indicator {
      @apply flex-col items-start;
    }

    .step,
    .isu-step {
      @apply flex-row items-center w-full mb-4;
    }

    .step:not(:last-child)::after,
    .isu-step:not(:last-child)::after {
      top: 50%;
      left: 1rem;
      width: 2px;
      height: 100%;
    }

    .step-label,
    .isu-step-label {
      @apply ml-3 mt-0 text-left;
      max-width: none;
    }
  }

  /* ------ File Upload Component ------ */
  .isu-file-upload {
    @apply w-full;
  }

  .isu-file-upload-area {
    @apply border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200;
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    color: var(--text-secondary);
  }

  .isu-file-upload-area:hover {
    border-color: var(--isu-primary);
    background-color: var(--bg-tertiary);
  }

  .isu-file-upload.dragover .isu-file-upload-area {
    border-color: var(--isu-primary);
    background-color: rgba(0, 127, 255, 0.05);
    box-shadow: 0 0 0 3px rgba(0, 127, 255, 0.1);
  }

  .isu-file-upload-area:focus-within {
    outline: none;
    border-color: var(--isu-primary);
    box-shadow: 0 0 0 3px rgba(0, 127, 255, 0.2);
  }

  .isu-file-upload-icon {
    @apply text-4xl mb-4;
    color: var(--text-tertiary);
  }

  .isu-file-upload-text {
    @apply text-base font-medium mb-2;
    font-family: var(--font-body);
    color: var(--text-primary);
  }

  .isu-file-upload-hint {
    @apply text-sm;
    font-family: var(--font-body);
    color: var(--text-tertiary);
  }

  /* ------ Requirement Check Component ------ */
  .isu-requirement-check {
    @apply flex items-center gap-3 p-3 rounded-lg border transition-all duration-200;
    font-family: var(--font-body);
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
  }

  .isu-requirement-check.met {
    background-color: var(--success-bg);
    border-color: var(--success-border);
    color: var(--success);
  }

  .isu-requirement-check.not-met {
    background-color: var(--error-bg);
    border-color: var(--error-border);
    color: var(--error);
  }

  .isu-requirement-icon {
    @apply text-xl font-bold flex-shrink-0;
  }

  .isu-requirement-check.met .isu-requirement-icon::before {
    content: '✓';
  }

  .isu-requirement-check.not-met .isu-requirement-icon::before {
    content: '✗';
  }

  .isu-requirement-text {
    @apply flex-1 text-sm;
    color: inherit;
  }

  /* ------ Score Display Component ------ */
  .isu-score-display {
    @apply rounded-lg p-6 text-center relative overflow-hidden;
    background: linear-gradient(135deg, var(--isu-primary) 0%, var(--isu-primary-dark) 100%);
    color: white;
    font-family: var(--font-body);
  }

  [data-theme="dark"] .isu-score-display {
    background: linear-gradient(135deg, var(--isu-primary) 0%, var(--isu-primary-dark) 100%);
  }

  .isu-score-value {
    @apply text-5xl font-bold mb-2;
    font-family: var(--font-heading);
    line-height: 1;
  }

  .isu-score-label {
    @apply text-base font-medium mb-1;
    opacity: 0.9;
  }

  .isu-score-max {
    @apply text-sm;
    opacity: 0.8;
  }

  /* ------ Table Component ------ */
  .isu-table {
    @apply w-full border-collapse;
    font-family: var(--font-body);
  }

  .isu-table thead {
    background-color: var(--bg-secondary);
  }

  .isu-table th {
    @apply px-4 py-3 text-left text-sm font-semibold border-b-2;
    font-family: var(--font-heading);
    color: var(--text-primary);
    border-color: var(--border-primary);
  }

  .isu-table tbody tr {
    @apply border-b;
    border-color: var(--border-primary);
    transition: background-color 0.2s ease;
  }

  .isu-table tbody tr:hover {
    background-color: var(--bg-secondary);
  }

  .isu-table td {
    @apply px-4 py-3 text-sm;
    color: var(--text-secondary);
  }

  .isu-table tbody tr:last-child {
    border-bottom: none;
  }

  @media (max-width: 768px) {
    .isu-table {
      @apply text-xs;
    }

    .isu-table th,
    .isu-table td {
      @apply px-2 py-2;
    }
  }

  /* ------ Card Variants ------ */
  .isu-card.hover-lift {
    @apply transition-all duration-300 cursor-pointer;
  }

  .isu-card.hover-lift:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }

  .isu-card.stat-card {
    @apply text-center;
  }

  .isu-card.stat-card .isu-heading-3 {
    @apply mb-2;
    color: var(--isu-primary);
  }

  /* ------ Form Step Component ------ */
  .isu-form-step {
    @apply mb-6 p-4 rounded-lg border-2;
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    transition: all 0.3s ease;
  }

  .isu-form-step.active {
    border-color: var(--isu-primary);
    box-shadow: 0 0 0 3px rgba(0, 127, 255, 0.1);
  }

  .isu-form-step.completed {
    border-color: var(--success);
    background-color: var(--success-bg);
  }

  /* ------ Language Button Component ------ */
  .isu-lang-btn {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-lg border transition-all duration-200;
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    color: var(--text-primary);
    font-family: var(--font-body);
    font-size: 0.875rem;
  }

  .isu-lang-btn:hover {
    background-color: var(--bg-tertiary);
    border-color: var(--isu-primary);
  }

  .isu-lang-btn.active {
    background-color: var(--isu-primary);
    border-color: var(--isu-primary);
    color: white;
  }

  /* ------ Prefix-less aliases for compatibility ------ */
  .timeline,
  .isu-timeline {
    @apply relative pl-8;
    position: relative;
  }

  .timeline::before,
  .isu-timeline::before {
    content: '';
    position: absolute;
    left: 0.5rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: var(--border-primary);
  }

  .timeline-item,
  .isu-timeline-item {
    @apply relative mb-8 last:mb-0;
    position: relative;
  }

  .timeline-marker,
  .isu-timeline-marker {
    @apply absolute w-4 h-4 rounded-full border-2;
    left: -1.75rem;
    top: 0.25rem;
    background-color: var(--bg-primary);
    border-color: var(--border-secondary);
    transition: all 0.3s ease;
  }

  .timeline-item.completed .timeline-marker,
  .isu-timeline-item.completed .isu-timeline-marker {
    background-color: var(--success);
    border-color: var(--success);
    box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
  }

  .timeline-item.active .timeline-marker,
  .isu-timeline-item.active .isu-timeline-marker {
    background-color: var(--isu-primary);
    border-color: var(--isu-primary);
    box-shadow: 0 0 0 4px rgba(0, 127, 255, 0.2), 0 0 12px rgba(0, 127, 255, 0.4);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  .timeline-item.pending .timeline-marker,
  .isu-timeline-item.pending .isu-timeline-marker {
    background-color: var(--bg-primary);
    border-color: var(--border-secondary);
  }

  .timeline-content,
  .isu-timeline-content {
    @apply pb-4;
  }

  .timeline-title,
  .isu-timeline-title {
    @apply font-semibold text-base mb-1;
    font-family: var(--font-heading);
    color: var(--text-primary);
  }

  .timeline-date,
  .isu-timeline-date {
    @apply text-sm mb-2;
    font-family: var(--font-body);
    color: var(--text-tertiary);
  }

  .timeline-person,
  .isu-timeline-person {
    @apply text-sm mb-2;
    font-family: var(--font-body);
    color: var(--text-secondary);
  }

  .timeline-note,
  .isu-timeline-note {
    @apply text-sm mt-2;
    font-family: var(--font-body);
    color: var(--text-tertiary);
  }

  .step-indicator,
  .isu-step-indicator {
    @apply flex items-center justify-between w-full relative;
    position: relative;
  }

  .step,
  .isu-step {
    @apply flex flex-col items-center relative flex-1;
    position: relative;
  }

  .step:not(:last-child)::after,
  .isu-step:not(:last-child)::after {
    content: '';
    position: absolute;
    top: 1rem;
    left: 50%;
    width: 100%;
    height: 2px;
    background-color: var(--border-primary);
    z-index: 0;
  }

  .step.completed:not(:last-child)::after,
  .isu-step.completed:not(:last-child)::after {
    background-color: var(--success);
  }

  .step.active:not(:last-child)::after,
  .isu-step.active:not(:last-child)::after {
    background: linear-gradient(to right, var(--success) 0%, var(--border-primary) 100%);
  }

  .step-circle,
  .isu-step-circle {
    @apply w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold relative z-10;
    background-color: var(--bg-secondary);
    border: 2px solid var(--border-secondary);
    color: var(--text-tertiary);
    font-family: var(--font-body);
    transition: all 0.3s ease;
  }

  .step.completed .step-circle,
  .isu-step.completed .isu-step-circle {
    background-color: var(--success);
    border-color: var(--success);
    color: white;
  }

  .step.active .step-circle,
  .isu-step.active .isu-step-circle {
    background-color: var(--isu-primary);
    border-color: var(--isu-primary);
    color: white;
    box-shadow: 0 0 0 4px rgba(0, 127, 255, 0.2), 0 0 12px rgba(0, 127, 255, 0.4);
    animation: pulse-glow 2s ease-in-out infinite;
  }

  .step.pending .step-circle,
  .isu-step.pending .isu-step-circle {
    background-color: var(--bg-secondary);
    border-color: var(--border-secondary);
    color: var(--text-tertiary);
  }

  .step-label,
  .isu-step-label {
    @apply mt-2 text-xs text-center;
    font-family: var(--font-body);
    color: var(--text-secondary);
    max-width: 100px;
  }

  .step.completed .step-label,
  .step.active .step-label,
  .isu-step.completed .isu-step-label,
  .isu-step.active .isu-step-label {
    color: var(--text-primary);
    font-weight: 500;
  }

  .file-upload-area,
  .isu-file-upload-area {
    @apply border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200;
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    color: var(--text-secondary);
  }

  .file-upload-area:hover,
  .isu-file-upload-area:hover {
    border-color: var(--isu-primary);
    background-color: var(--bg-tertiary);
  }

  .requirement-check,
  .isu-requirement-check {
    @apply flex items-center gap-3 p-3 rounded-lg border transition-all duration-200;
    font-family: var(--font-body);
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
  }

  .requirement-check.met,
  .isu-requirement-check.met {
    background-color: var(--success-bg);
    border-color: var(--success-border);
    color: var(--success);
  }

  .requirement-check.not-met,
  .isu-requirement-check.not-met {
    background-color: var(--error-bg);
    border-color: var(--error-border);
    color: var(--error);
  }

  .check-icon,
  .isu-requirement-icon {
    @apply text-xl font-bold flex-shrink-0;
  }

  .requirement-check.met .check-icon::before,
  .isu-requirement-check.met .isu-requirement-icon::before {
    content: '✓';
  }

  .requirement-check.not-met .check-icon::before,
  .isu-requirement-check.not-met .isu-requirement-icon::before {
    content: '✗';
  }

  .requirement-check .requirement-text,
  .isu-requirement-check .isu-requirement-text {
    @apply flex-1 text-sm;
    color: inherit;
  }

  .score-display,
  .isu-score-display {
    @apply rounded-lg p-6 text-center relative overflow-hidden;
    background: linear-gradient(135deg, var(--isu-primary) 0%, var(--isu-primary-dark) 100%);
    color: white;
    font-family: var(--font-body);
  }

  .score-value,
  .isu-score-value {
    @apply text-5xl font-bold mb-2;
    font-family: var(--font-heading);
    line-height: 1;
  }

  .score-label,
  .isu-score-label {
    @apply text-base font-medium mb-1;
    opacity: 0.9;
  }

  .form-step,
  .isu-form-step {
    @apply mb-6 p-4 rounded-lg border-2;
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    transition: all 0.3s ease;
  }

  .form-step.active,
  .isu-form-step.active {
    border-color: var(--isu-primary);
    box-shadow: 0 0 0 3px rgba(0, 127, 255, 0.1);
  }

  .form-step.completed,
  .isu-form-step.completed {
    border-color: var(--success);
    background-color: var(--success-bg);
  }

  .lang-btn,
  .isu-lang-btn {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-lg border transition-all duration-200;
    background-color: var(--bg-secondary);
    border-color: var(--border-primary);
    color: var(--text-primary);
    font-family: var(--font-body);
    font-size: 0.875rem;
  }

  .lang-btn:hover,
  .isu-lang-btn:hover {
    background-color: var(--bg-tertiary);
    border-color: var(--isu-primary);
  }

  .lang-btn.active,
  .isu-lang-btn.active {
    background-color: var(--isu-primary);
    border-color: var(--isu-primary);
    color: white;
  }

  .stat-card,
  .isu-card.stat-card {
    @apply rounded-lg border-2 p-6 shadow-sm text-center;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-primary);
  }

  .stat-card .isu-heading-3,
  .isu-card.stat-card .isu-heading-3 {
    @apply mb-2;
    color: var(--isu-primary);
  }

  .hover-lift,
  .isu-card.hover-lift {
    @apply rounded-lg border-2 p-6 shadow-sm transition-all duration-300 cursor-pointer;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-primary);
  }

  .hover-lift:hover,
  .isu-card.hover-lift:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }
}

/* ============================================
   DARK THEME SPECIFIC IMPROVEMENTS
   ============================================ */

@layer components {

  /* Button dark theme overrides */
  [data-theme="dark"] .isu-button-secondary {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .isu-button-secondary:hover {
    background-color: var(--bg-hover);
    border-color: var(--border-secondary);
  }

  /* Input dark theme enhancements */
  [data-theme="dark"] .isu-input {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .isu-input:focus {
    background-color: var(--bg-tertiary);
    border-color: var(--isu-primary);
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.2);
  }

  [data-theme="dark"] .isu-input::placeholder {
    color: var(--text-muted);
  }

  /* Card dark theme improvements */
  [data-theme="dark"] .isu-card {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
    box-shadow: var(--shadow-sm);
  }

  [data-theme="dark"] .isu-card-hover:hover {
    background-color: var(--bg-hover);
    box-shadow: var(--shadow-md);
    border-color: var(--border-secondary);
  }

  /* Alert dark theme colors */
  [data-theme="dark"] .isu-alert-success {
    background-color: var(--success-bg);
    color: var(--success);
    border-color: var(--success-border);
  }

  [data-theme="dark"] .isu-alert-error {
    background-color: var(--error-bg);
    color: var(--error);
    border-color: var(--error-border);
  }

  [data-theme="dark"] .isu-alert-warning {
    background-color: var(--warning-bg);
    color: var(--warning);
    border-color: var(--warning-border);
  }

  [data-theme="dark"] .isu-alert-info {
    background-color: var(--info-bg);
    color: var(--info);
    border-color: var(--info-border);
  }

  /* Badge dark theme */
  [data-theme="dark"] .isu-badge-success {
    background-color: var(--success-bg);
    color: var(--success);
  }

  [data-theme="dark"] .isu-badge-error {
    background-color: var(--error-bg);
    color: var(--error);
  }

  [data-theme="dark"] .isu-badge-warning {
    background-color: var(--warning-bg);
    color: var(--warning);
  }

  /* Link dark theme */
  [data-theme="dark"] .isu-link {
    color: var(--isu-primary-light);
  }

  [data-theme="dark"] .isu-link:hover {
    color: var(--isu-primary);
  }

  [data-theme="dark"] .isu-link-subtle {
    color: var(--text-tertiary);
  }

  [data-theme="dark"] .isu-link-subtle:hover {
    color: var(--text-primary);
  }

  /* Select arrow için dark theme */
  [data-theme="dark"] .isu-select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23a3a3a3' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
  }

  /* Timeline dark theme */
  [data-theme="dark"] .isu-timeline::before {
    background-color: var(--border-primary);
  }

  [data-theme="dark"] .isu-timeline-item.pending .isu-timeline-marker {
    background-color: var(--bg-tertiary);
    border-color: var(--border-secondary);
  }

  /* Step Indicator dark theme */
  [data-theme="dark"] .isu-step-circle {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .isu-step.pending .isu-step-circle {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  /* File Upload dark theme */
  [data-theme="dark"] .isu-file-upload-area {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .isu-file-upload-area:hover {
    background-color: var(--bg-hover);
  }

  [data-theme="dark"] .isu-file-upload.dragover .isu-file-upload-area {
    background-color: rgba(96, 165, 250, 0.1);
  }

  /* Requirement Check dark theme */
  [data-theme="dark"] .isu-requirement-check {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  /* Table dark theme */
  [data-theme="dark"] .isu-table thead {
    background-color: var(--bg-tertiary);
  }

  [data-theme="dark"] .isu-table tbody tr:hover {
    background-color: var(--bg-hover);
  }

  /* Card variants dark theme */
  [data-theme="dark"] .isu-card.hover-lift:hover {
    box-shadow: var(--shadow-lg);
  }

  /* Form Step dark theme */
  [data-theme="dark"] .form-step,
  [data-theme="dark"] .isu-form-step {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .form-step.active,
  [data-theme="dark"] .isu-form-step.active {
    border-color: var(--isu-primary);
  }

  [data-theme="dark"] .form-step.completed,
  [data-theme="dark"] .isu-form-step.completed {
    background-color: var(--success-bg);
    border-color: var(--success-border);
  }

  /* Language Button dark theme */
  [data-theme="dark"] .lang-btn,
  [data-theme="dark"] .isu-lang-btn {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .lang-btn:hover,
  [data-theme="dark"] .isu-lang-btn:hover {
    background-color: var(--bg-hover);
  }

  /* Timeline dark theme for prefix-less classes */
  [data-theme="dark"] .timeline::before,
  [data-theme="dark"] .isu-timeline::before {
    background-color: var(--border-primary);
  }

  [data-theme="dark"] .timeline-item.pending .timeline-marker,
  [data-theme="dark"] .isu-timeline-item.pending .isu-timeline-marker {
    background-color: var(--bg-tertiary);
    border-color: var(--border-secondary);
  }

  /* Step Indicator dark theme for prefix-less classes */
  [data-theme="dark"] .step-circle,
  [data-theme="dark"] .isu-step-circle {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .step.pending .step-circle,
  [data-theme="dark"] .isu-step.pending .isu-step-circle {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  /* File Upload dark theme for prefix-less classes */
  [data-theme="dark"] .file-upload-area,
  [data-theme="dark"] .isu-file-upload-area {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .file-upload-area:hover,
  [data-theme="dark"] .isu-file-upload-area:hover {
    background-color: var(--bg-hover);
  }

  /* Requirement Check dark theme for prefix-less classes */
  [data-theme="dark"] .requirement-check,
  [data-theme="dark"] .isu-requirement-check {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  /* Score Display dark theme for prefix-less classes */
  [data-theme="dark"] .score-display,
  [data-theme="dark"] .isu-score-display {
    background: linear-gradient(135deg, var(--isu-primary) 0%, var(--isu-primary-dark) 100%);
  }

  /* Stat Card dark theme for prefix-less classes */
  [data-theme="dark"] .stat-card,
  [data-theme="dark"] .isu-card.stat-card {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  /* Hover Lift dark theme for prefix-less classes */
  [data-theme="dark"] .hover-lift,
  [data-theme="dark"] .isu-card.hover-lift {
    background-color: var(--bg-tertiary);
    border-color: var(--border-primary);
  }

  [data-theme="dark"] .hover-lift:hover,
  [data-theme="dark"] .isu-card.hover-lift:hover {
    box-shadow: var(--shadow-lg);
  }
}


/* ============================================
   THEME TOGGLE UTILITY
   ============================================ */

@layer utilities {

  /* Smooth theme transitions */
  * {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 200ms;
  }

  /* Prevent transitions on theme toggle */
  .theme-transition-disable * {
    transition: none !important;
  }
}

/* ISU Utilities - harici dosya varsa buradan import */
@import './utilities.css';